<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EJECT | Scrum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="/EJECT_Trilha_de_Conhecimento/img/eject_logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@200;300;400;500;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: "Exo 2", sans-serif;
            background: linear-gradient(275.04deg, rgb(228, 243, 255) 1.05%, rgb(244, 246, 251) 100%);
            color: white; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s, color 0.3s;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #0284c7; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #0369a1; }
        code {
            background-color: #e5e7eb; color: #be123c; padding: 0.125rem 0.25rem;
            border-radius: 0.25rem; font-size: 0.875em;
        }
        .vw-plugin-wrapper { z-index: 1000 !important; }
        .aspect-w-16 { position: relative; padding-bottom: calc(9 / 16 * 100%); }
        .aspect-h-9 > * { position: absolute; height: 100%; width: 100%; top: 0; right: 0; bottom: 0; left: 0; }

        .btn-gemini {
            background: linear-gradient(92.07deg, #652CD1 1.84%, #8E2DE2 100%); color: white;
            font-weight: 600; padding: 0.625rem 1.25rem; border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            transition: all 0.3s ease; border: none; cursor: pointer;
        }
        .btn-gemini:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(101,44,209,0.4), 0 4px 6px -2px rgba(101,44,209,0.3);
        }
        .btn-gemini:disabled { opacity: 0.7; cursor: not-allowed; }

        .loading-spinner-gemini, .loading-spinner-pdf {
            border: 4px solid rgba(255,255,255,0.2); width: 24px; height: 24px;
            border-radius: 50%; border-left-color: #A78BFA;
            animation: spin 1s ease infinite; margin: 10px auto;
        }
        .loading-spinner-pdf { border-left-color: #38bdf8; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); display: flex; justify-content: center;
            align-items: center; z-index: 1050; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-backdrop.active { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: white; color: #374151; padding: 2rem;
            border-radius: 0.75rem; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%; max-width: 500px; 
            max-height: 90vh; overflow-y: auto; transform: translateY(-50px);
            transition: transform 0.3s ease;
        }
        .modal-backdrop.active .modal-content { transform: translateY(0); }
        .modal-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #e5e7eb; padding-bottom: 1rem; margin-bottom: 1rem;
        }
        .modal-title { font-size: 1.25rem; font-weight: 600; color: #1e40af; }
        .modal-close-btn {
            background: none; border: none; font-size: 1.75rem; font-weight: bold;
            color: #6b7280; cursor: pointer; padding: 0.5rem; line-height: 1;
        }
        .modal-close-btn:hover { color: #1f2937; }
        .modal-body { margin-bottom: 1.5rem; }
        .modal-body pre {
            background-color: #f3f4f6; padding: 1rem; border-radius: 0.5rem;
            white-space: pre-wrap; word-wrap: break-word; font-size: 0.9rem;
            max-height: 40vh; overflow-y: auto;
        }
        .podcast-iframe-container { margin-top: 0.5rem; }
        .podcast-iframe-container iframe { max-width: 100%; border-radius: 0.375rem; }

        #qrcodeCanvas {
            width: 200px; height: 200px; margin: 1.5rem auto; padding: 10px;
            background-color: white; border-radius: 0.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #qrcodeCanvas img { display: block; width: 100% !important; height: 100% !important; }
        .copy-link-btn { background-color: #0ea5e9; color: white; }
        .copy-link-btn:hover { background-color: #0284c7; }

        #pdfExportFeedback {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%); background-color: #22c55e;
            color: white; padding: 10px 20px; border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 2000;
            display: none; font-size: 0.9rem;
        }
        #pdfExportFeedback.error { background-color: #ef4444; }

        /* Accessibility Panel Styles */
        #accessibilityToolbar {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1060; 
        }
        #accessibilityBtn {
            background-color: #1e40af; 
            color: white;
            border-radius: 50%;
            width: 56px; 
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #accessibilityBtn:hover {
            background-color: #1c3a94; 
        }
        #accessibilityPanel {
            position: absolute;
            bottom: 70px; 
            right: 0;
            width: 280px;
            background-color: white;
            color: #374151;
            border-radius: 0.5rem; 
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        }
        #accessibilityPanel.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .accessibility-section { margin-bottom: 1rem; }
        .accessibility-section h4 {
            font-size: 0.875rem; 
            font-weight: 600; 
            color: #1e40af; 
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        .accessibility-controls button, .accessibility-controls select, .accessibility-controls input[type="range"] {
            width: 100%;
            text-align: left;
            padding: 0.5rem 0.75rem;
            margin-top: 0.25rem;
            border-radius: 0.375rem; 
            border: 1px solid #d1d5db; 
            background-color: #f9fafb; 
            color: #374151; 
            font-size: 0.875rem;
            transition: background-color 0.2s;
        }
        .accessibility-controls button:hover, .accessibility-controls select:hover {
            background-color: #f3f4f6; 
        }
        .accessibility-controls button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .tts-controls button { margin-right: 0.5rem; width: auto; }
        .accessibility-controls label {
            display: block;
            font-size: 0.75rem; /* text-xs */
            color: #4b5563; /* text-gray-600 */
            margin-top: 0.5rem;
            margin-bottom: 0.125rem;
        }
        .accessibility-controls input[type="range"] {
            padding: 0; /* Remover padding padrão do range */
            height: 1.25rem; /* Ajustar altura */
        }


        /* High Contrast Themes */
        body.contrast-bw { background: black !important; color: white !important; }
        body.contrast-bw header, body.contrast-bw .bg-white { background-color: black !important; color: white !important; border: 1px solid #555 !important; }
        body.contrast-bw [class*="text-gray-"], body.contrast-bw [class*="text-sky-"], body.contrast-bw [class*="text-violet-"] { color: white !important; }
        body.contrast-bw .text-sky-700, body.contrast-bw .text-sky-800, body.contrast-bw .text-sky-600, body.contrast-bw .text-violet-700 { color: #FFFF00 !important; } 
        body.contrast-bw a:not(.btn-gemini):not(.btn-voltar) { color: #FFFF00 !important; text-decoration: underline !important; }
        body.contrast-bw button:not(#accessibilityBtn):not(.btn-gemini):not(.modal-close-btn):not(.copy-link-btn), body.contrast-bw .btn-voltar { background-color: #222 !important; color: white !important; border: 1px solid white !important; }
        body.contrast-bw .copy-link-btn { background-color: #222 !important; color: white !important; border: 1px solid white !important; }
        body.contrast-bw #featureDescription { background-color: #111 !important; color: white !important; border-color: #555 !important; }
        body.contrast-bw .modal-content { background-color: black !important; color: white !important; border: 1px solid #555 !important;}
        body.contrast-bw .modal-title { color: #FFFF00 !important; }
        body.contrast-bw .modal-body pre { background-color: #1a1a1a !important; }
        body.contrast-bw #pageLinkInput { background-color: #111 !important; color: white !important; }


        body.contrast-yb { background: #000000 !important; color: #FFFF00 !important; } 
        body.contrast-yb header, body.contrast-yb .bg-white { background-color: #000000 !important; color: #FFFF00 !important; border: 1px solid #FFFF00 !important; }
        body.contrast-yb [class*="text-gray-"], body.contrast-yb [class*="text-sky-"], body.contrast-yb [class*="text-violet-"] { color: #FFFF00 !important; }
        body.contrast-yb .text-sky-700, body.contrast-yb .text-sky-800, body.contrast-yb .text-sky-600, body.contrast-yb .text-violet-700 { color: #00FFFF !important; } 
        body.contrast-yb a:not(.btn-gemini):not(.btn-voltar) { color: #00FFFF !important; text-decoration: underline !important; }
        body.contrast-yb button:not(#accessibilityBtn):not(.btn-gemini):not(.modal-close-btn):not(.copy-link-btn), body.contrast-yb .btn-voltar { background-color: #1a1a1a !important; color: #FFFF00 !important; border: 1px solid #FFFF00 !important; }
        body.contrast-yb .copy-link-btn { background-color: #1a1a1a !important; color: #FFFF00 !important; border: 1px solid #FFFF00 !important; }
        body.contrast-yb #featureDescription { background-color: #111 !important; color: #FFFF00 !important; border-color: #FFFF00 !important; }
        body.contrast-yb .modal-content { background-color: black !important; color: #FFFF00 !important; border: 1px solid #FFFF00 !important;}
        body.contrast-yb .modal-title { color: #00FFFF !important; }
        body.contrast-yb .modal-body pre { background-color: #1a1a1a !important; }
        body.contrast-yb #pageLinkInput { background-color: #111 !important; color: #FFFF00 !important; }

    </style>
</head>
<body class="antialiased">

    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center">
                    <a href="#" class="text-2xl font-bold text-sky-700 hover:text-sky-800 transition-colors">
                        Hub de Conhecimentos
                    </a>
                </div>
                <div class="flex items-center space-x-3 sm:space-x-4">
                    <button id="exportPdfBtn" title="Exportar para PDF" class="p-2 rounded-full text-sky-600 hover:bg-sky-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </button>
                    <button id="sharePageBtn" title="Partilhar Página" class="p-2 rounded-full text-sky-600 hover:bg-sky-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
                        </svg>
                    </button>
                    <a href="https://www.ejectufrn.com.br/" target="_blank" rel="noopener noreferrer">
                        <img src="/EJECT_Trilha_de_Conhecimento/img/logo.svg" alt="Logotipo da EJECT" class="h-10">
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main id="content-container" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <input type="hidden" id="trilha-nome" value="Scrum" />
        
        <section class="mb-6">
            <a href="#" class="inline-flex items-center bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 px-4 rounded-lg shadow transition duration-150 ease-in-out">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Voltar
            </a>
        </section>

        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <h1 class="text-4xl font-bold text-sky-800 mb-4">Scrum</h1>
            <p class="text-lg leading-relaxed text-gray-700">Scrum é um framework ágil utilizado no gerenciamento e desenvolvimento de projetos complexos, principalmente no contexto de desenvolvimento de software. Ele organiza o trabalho em ciclos curtos chamados sprints, promovendo entregas contínuas e a melhoria constante com base em revisões regulares.</p>
        </section>

        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6 pb-4 border-b border-gray-200">
                <h2 class="text-3xl font-semibold text-sky-700 mb-2 sm:mb-0">Fundamentos do Scrum</h2>
            </div>
            <div class="space-y-4 text-gray-700">
                <p>O Scrum é sustentado por três pilares fundamentais: transparência, inspeção e adaptação. Vamos desmembrar cada um deles para facilitar o entendimento.</p>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Transparência</h3>
                    <p>Todos os aspectos significativos do processo devem ser visíveis para as pessoas envolvidas. <br>Por exemplo, imagine que você está desenvolvendo um aplicativo com uma equipe. A transparência significa que todos os membros da equipe sabem quais tarefas estão em andamento, quais já foram concluídas e o que ainda precisa ser feito. Para isso, utilizam-se ferramentas como o kanban, onde cada tarefa é visualmente apresentada.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Inspeção</h3>
                    <p>O progresso do trabalho precisa ser inspecionado frequentemente, tanto em termos de produto quanto de processo, para identificar possíveis desvios. Um exemplo disso seria uma revisão periódica dos protótipos ou funcionalidades do produto para garantir que estão alinhados com os objetivos iniciais.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Adaptação</h3>
                    <p>Caso alguma discrepância seja identificada na inspeção, deve-se ajustar o curso imediatamente. Isso pode ser comparado a um estudante que percebe, ao revisar suas anotações, que não compreendeu bem um tópico. Ele, então, ajusta sua estratégia de estudo antes da próxima prova.</p>
                </div>
                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-sky-700 mb-2">SCRUM O QUE É (de um Jeito BEM Prático)</h4>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow">
                        <iframe src="https://www.youtube.com/embed/HlmiVz0SqNQ?si=qWQH1UEq9JbRwWCd" title="SCRUM O QUE É (de um Jeito BEM Prático)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6 pb-4 border-b border-gray-200">
                <h2 class="text-3xl font-semibold text-sky-700 mb-2 sm:mb-0">Papéis no Scrum</h2>
            </div>
            <p class="mb-4 text-gray-700">O Scrum define três papéis principais, que formam o núcleo da equipe: Product Owner, Scrum Master e o Time de Desenvolvimento. Cada papel tem responsabilidades específicas e complementares.</p>
            <div class="space-y-4 text-gray-700">
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Product Owner (Dono do Produto)</h3>
                    <p>O <strong class="font-semibold text-sky-700">Product Owner</strong> é responsável por maximizar o valor do produto resultante do trabalho da equipe. Ele gerencia o Product Backlog (lista priorizada de tudo o que precisa ser feito no projeto) e decide quais funcionalidades ou melhorias devem ser desenvolvidas primeiro, priorizando o que traz mais valor para o cliente ou para o negócio. <br><br>
                    <strong>Exemplo:</strong> Imagine que sua equipe está desenvolvendo um aplicativo de gerenciamento de finanças. O Product Owner pode priorizar a criação de uma funcionalidade que permite aos usuários registrar suas despesas diárias, já que isso traz um valor imediato para os usuários, em vez de priorizar uma função mais complexa, como previsões financeiras baseadas em inteligência artificial.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Scrum Master</h3>
                    <p>O <strong class="font-semibold text-sky-700">Scrum Master</strong> é o facilitador do processo Scrum. Ele ajuda a equipe a entender e seguir as práticas do framework, removendo impedimentos que possam atrapalhar o progresso do time. Além disso, ele garante que o Scrum esteja sendo aplicado corretamente, promovendo um ambiente de trabalho colaborativo e produtivo. <br><br>
                    <strong>Exemplo:</strong> Se, durante um sprint, a equipe encontra dificuldades com uma tecnologia específica, o Scrum Master pode atuar ajudando a equipe a encontrar uma solução, seja buscando apoio externo ou sugerindo uma abordagem diferente.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Time de Desenvolvimento</h3>
                    <p>O <strong class="font-semibold text-sky-700">Time de Desenvolvimento</strong> é formado por profissionais multidisciplinares que são responsáveis por entregar o incremento do produto ao final de cada sprint. Eles são autogeridos, ou seja, eles próprios decidem como organizar o trabalho para atingir o objetivo do sprint. <br><br>
                    <strong>Exemplo:</strong> Em um projeto de desenvolvimento de um site de e-commerce, o time de desenvolvimento pode ser composto por desenvolvedores de front-end e back-end, designers de UI/UX e testadores. Eles cooperam para entregar uma nova funcionalidade do site, como a página de checkout, ao final de um sprint.</p>
                </div>
            </div>
        </section>

        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6 pb-4 border-b border-gray-200">
                <h2 class="text-3xl font-semibold text-sky-700 mb-2 sm:mb-0">Eventos do Scrum</h2>
            </div>
            <p class="mb-4 text-gray-700">O Scrum organiza o trabalho em eventos (ou cerimônias), que são essenciais para a entrega de valor contínuo e a melhoria do processo. Estes eventos criam cadência e oportunidades regulares de inspeção e adaptação.</p>
            <div class="space-y-4 text-gray-700">
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Sprint</h3>
                    <p>O sprint é o ciclo de trabalho do Scrum, com duração fixa (geralmente entre 1 e 4 semanas), durante o qual um incremento potencialmente utilizável do produto é desenvolvido. Cada sprint tem um objetivo claro, e não se pode alterar o escopo do sprint após ele ter começado. <br><br>
                    <strong>Exemplo:</strong> Se estamos desenvolvendo um aplicativo de educação, em um sprint de 2 semanas, a equipe pode decidir criar e entregar uma funcionalidade de "quiz" com diferentes níveis de dificuldade. Ao final dessas 2 semanas, o quiz deve estar funcional e pronto para uso ou testes.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Planejamento do Sprint (Sprint Planning)</h3>
                    <p>O planejamento do sprint é uma reunião que acontece no início de cada sprint, onde o Product Owner apresenta ao time de desenvolvimento os itens do backlog priorizados. A equipe, em conjunto, decide quantos itens podem ser concluídos durante o sprint e elabora um plano para alcançá-los. <br><br>
                    <strong>Exemplo:</strong> Durante o planejamento do sprint, a equipe decide que, para o sprint atual, irá desenvolver a funcionalidade de "login" e aprimorar a interface do usuário. Eles estimam o tempo necessário para cada tarefa e definem as etapas para alcançar o objetivo do sprint.</p>
                </div>
                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-sky-700 mb-2">Scrum - Como fazer um Planejamento da Sprint na Prática</h4>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow">
                        <iframe src="https://www.youtube.com/embed/Pucp6CoCIEk?si=212i1ZNc8p7Jvs2V" title="Planejamento da Sprint na Prática" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mt-6 mb-2">Daily Scrum (Reunião Diária)</h3>
                    <p>A <strong class="font-semibold text-sky-700">reunião diária</strong> é um encontro curto (máximo de 15 minutos) onde o time de desenvolvimento sincroniza as atividades e ajusta o plano de trabalho para as próximas 24 horas. Cada membro do time responde a três perguntas básicas: O que fiz ontem? O que farei hoje? Há algum impedimento no meu caminho? <br><br>
                    <strong>Exemplo:</strong> Imagine que estamos no segundo dia do sprint de desenvolvimento da funcionalidade de relatórios financeiros. Durante a reunião diária, um dos desenvolvedores pode mencionar que teve problemas com a integração da funcionalidade ao banco de dados, o que poderá ser discutido e resolvido pela equipe para garantir que o trabalho continue conforme o planejado.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Revisão do Sprint (Sprint Review)</h3>
                    <p>Ao final de cada sprint, a equipe apresenta o que foi concluído para o Product Owner e stakeholders (partes interessadas). Essa é uma oportunidade para o time receber feedback sobre o que foi desenvolvido e discutir as próximas etapas. <br><br>
                    <strong>Exemplo:</strong> Durante a revisão do sprint, a equipe de desenvolvimento do aplicativo de finanças pode demonstrar a nova funcionalidade de relatórios para o Product Owner e receber feedback. O Product Owner pode sugerir melhorias antes de a funcionalidade ser liberada para os usuários.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Retrospectiva do Sprint (Sprint Retrospective)</h3>
                    <p>A retrospectiva do sprint é uma reunião interna onde a equipe reflete sobre o que foi bem-sucedido no sprint e o que pode ser melhorado no próximo. É uma oportunidade para melhoria contínua do processo. <br><br>
                    <strong>Exemplo:</strong> Na retrospectiva do sprint, a equipe pode discutir que a comunicação entre os desenvolvedores e o designer de UI/UX foi um pouco lenta, e sugerir maneiras de melhorar essa colaboração no próximo sprint.</p>
                </div>
                <img src="https://www.sydle.com/blog/assets/post/framework-scrum-5f6dc45f320703787497f887/eventos-scrum.png" alt="Eventos do Scrum" class="w-full sm:w-4/5 max-w-lg mx-auto mt-6 rounded-lg shadow">
            </div>
        </section>

        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6 pb-4 border-b border-gray-200">
                <h2 class="text-3xl font-semibold text-sky-700 mb-2 sm:mb-0">Artefatos do Scrum</h2>
            </div>
            <p class="mb-4 text-gray-700">Os artefatos são representações tangíveis de informações no Scrum, que servem para garantir a transparência e facilitar as inspeções e adaptações. Os principais artefatos são: <strong class="font-semibold text-sky-700">Product Backlog, Sprint Backlog e Incremento.</strong></p>
            <div class="space-y-4 text-gray-700">
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Product Backlog</h3>
                    <p>O Product Backlog é uma lista priorizada de tudo que precisa ser desenvolvido no produto. O Product Owner é o responsável por manter e priorizar essa lista, que está em constante evolução. <br><br>
                    <strong>Exemplo:</strong> No desenvolvimento de um aplicativo de educação, o Product Backlog pode incluir itens como "Criar sistema de login", "Adicionar funcionalidade de quiz", "Implementar sistema de ranking".</p>
                    
                    <div class="mt-8 p-6 border border-violet-300 rounded-xl bg-violet-50 shadow-inner">
                        <h4 class="text-lg font-semibold text-violet-700 mb-3">✨ Gerador de User Stories com IA</h4>
                        <p class="text-sm text-violet-600 mb-3">Descreva uma funcionalidade abaixo e clique no botão para gerar exemplos de user stories.</p>
                        <div>
                            <label for="featureDescription" class="block text-sm font-medium text-violet-700 mb-1">Descrição da Funcionalidade:</label>
                            <textarea id="featureDescription" rows="3" class="w-full p-2 border border-violet-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500 text-gray-800" placeholder="Ex: Um sistema de login para utilizadores"></textarea>
                        </div>
                        <button id="generateUserStoriesBtn" class="btn-gemini mt-4 w-full sm:w-auto">
                            Gerar Exemplos de User Stories
                        </button>
                        <div id="userStoriesLoading" class="loading-spinner-gemini hidden mt-4"></div>
                    </div>
                    </div>

                <div class="mt-8"> <h3 class="text-xl font-semibold text-sky-700 mb-2">Sprint Backlog</h3>
                    <p>O Sprint Backlog é o conjunto de itens do Product Backlog que foram selecionados para o sprint, juntamente com o plano de ação para entregá-los. <br><br>
                    <strong>Exemplo:</strong> Para o sprint de 2 semanas, a equipe pode selecionar "Criar sistema de login" e "Adicionar funcionalidade de quiz" do Product Backlog para trabalhar durante esse período.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-2">Incremento</h3>
                    <p>O Incremento é o resultado final do sprint, que deve ser um produto ou funcionalidade utilizável, mesmo que o Product Owner decida não liberá-lo imediatamente. <br><br>
                    <strong>Exemplo:</strong> Ao final do sprint, o incremento pode ser uma nova funcionalidade de "quiz" que esteja pronta para ser testada pelos usuários, mesmo que ainda não seja lançada oficialmente.</p>
                </div>
                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-sky-700 mb-2">Conheça os 3 Artefatos do Scrum</h4>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow">
                        <iframe src="https://www.youtube.com/embed/sJtDuC4AhoI?si=ud66axSdt9H3jXgl" title="Artefatos do Scrum" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </section>

        <section class="p-6 bg-white rounded-xl shadow-lg text-gray-800">
            <h2 class="text-3xl font-semibold text-sky-700 mb-6 pb-4 border-b border-gray-200">Referências e Conteúdos Extras</h2>
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Sites</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://aws.amazon.com/pt/what-is/scrum/#:~:text=O%20Scrum%20%C3%A9%20um%20framework%20para%20fazer%20o%20trabalho%20no,Agile%20para%20gerenciamento%20de%20projetos." target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">O que é o Scrum? (AWS)</a></li>
                        <li><a href="https://fia.com.br/blog/scrum/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Scrum: o que é e como aplicar a metodologia ágil (FIA)</a></li>
                        <li><a href="https://caroli.org/scrum-significado-aplicacao-conceitos-e-exemplos/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">SCRUM: significado, aplicação, conceitos e exemplos (Caroli.org)</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Livros</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://www.amazon.com.br/SCRUM-fazer-dobro-trabalho-metade/dp/8543107164" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Scrum: A arte de fazer o dobro do trabalho na metade do tempo (Amazon)</a></li>
                        <li><a href="https://www.amazon.com.br/Sprint-M%C3%A9todo-Google-Testar-Aplicar/dp/8551001523" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Sprint: O método usado no Google para testar e aplicar novas ideias (Amazon)</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Vídeos</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://www.youtube.com/embed/XU0llRltyFM" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Scrum in 20 mins... (with examples) [YOUTUBE - EN]</a></li>
                        <li><a href="https://www.youtube.com/embed/I1yZCoq3b0A" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Kanban OU Scrum? QUAL A DIFERENÇA? [YOUTUBE - PT-Br]</a></li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Cursos</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://www.alura.com.br/curso-online-scrum-agilidade-seu-projeto" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Scrum: agilidade em seu projeto (Alura)</a></li>
                        <li><a href="https://www.udemy.com/course/formacao-total-em-scrum/" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">Certificação Scrum Master: Curso Preparatório COMPLETO (Udemy)</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-3">Podcasts</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://www.youtube.com/embed/examplePodcastID" target="_blank" class="text-sky-600 hover:text-sky-800 hover:underline transition-colors">OS VALORES DO SCRUM | PODCAST SEJA ÁGIL [YOUTUBE - PT-Br]</a></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-sky-900 text-white text-center py-8 mt-12">
        <p class="text-sm">Feito com <strong class="font-semibold">foco</strong> e <strong class="font-semibold">compromisso</strong> pela EJECT© - Todos os direitos reservados.</p>
    </footer>

    <div id="geminiModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="geminiModalTitle" class="modal-title">Resultado da IA</h5>
                <button type="button" class="modal-close-btn" id="geminiModalCloseBtn">×</button>
            </div>
            <div id="geminiModalBody" class="modal-body"></div>
        </div>
    </div>

    <div id="shareModal" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="shareModalTitle" class="modal-title">Partilhar Página</h5>
                <button type="button" class="modal-close-btn" id="shareModalCloseBtn">×</button>
            </div>
            <div id="shareModalBody" class="modal-body text-center">
                <p class="mb-2 text-sm text-gray-600">Copie o link ou utilize o QR Code:</p>
                <div class="flex items-center border border-gray-300 rounded-md p-2 mb-4">
                    <input type="text" id="pageLinkInput" readonly class="w-full p-1.5 border-none focus:ring-0 text-sm text-gray-700 bg-gray-50 rounded-l-md">
                    <button id="copyLinkBtn" class="copy-link-btn px-4 py-1.5 rounded-r-md text-sm font-medium transition-colors">
                        Copiar
                    </button>
                </div>
                <div id="qrcodeCanvasContainer" class="flex justify-center">
                     <div id="qrcodeCanvas"></div> </div>
                <p id="copyFeedback" class="text-xs text-green-600 mt-2 h-4"></p>
            </div>
        </div>
    </div>
    <div id="pdfExportFeedback">A preparar PDF...</div>

    <div id="accessibilityToolbar">
        <button id="accessibilityBtn" title="Opções de Acessibilidade">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-5v12c0 .55-.45 1-1 1s-1-.45-1-1v-5h-2v5c0 .55-.45 1-1 1s-1-.45-1-1V9H3V7h18v2z"/>
            </svg>
        </button>
        <div id="accessibilityPanel" class="hidden">
            <div class="accessibility-section">
                <h4>Tamanho da Fonte</h4>
                <div class="accessibility-controls space-y-1">
                    <button id="increaseFontBtn">Aumentar Fonte (+)</button>
                    <button id="decreaseFontBtn">Diminuir Fonte (-)</button>
                    <button id="resetFontBtn">Restaurar Fonte</button>
                </div>
            </div>
            <div class="accessibility-section">
                <h4>Contraste</h4>
                <div class="accessibility-controls space-y-1">
                    <button id="defaultContrastBtn">Padrão</button>
                    <button id="bwContrastBtn">Preto e Branco</button>
                    <button id="ybContrastBtn">Amarelo e Preto</button>
                </div>
            </div>
            <div class="accessibility-section">
                <h4>Leitor de Texto</h4>
                <div class="accessibility-controls tts-controls flex space-x-1">
                    <button id="playTTSBtn" title="Ler Conteúdo">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>
                        Ler
                    </button>
                    <button id="pauseTTSBtn" title="Pausar Leitura">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1H8zm3 0a1 1 0 00-1 1v4a1 1 0 001 1h1a1 1 0 001-1V8a1 1 0 00-1-1h-1z" clip-rule="evenodd" /></svg>
                        Pausar
                    </button>
                    <button id="stopTTSBtn" title="Parar Leitura">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 9a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm4 0a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                        Parar
                    </button>
                </div>
                <div class="accessibility-controls mt-2">
                    <label for="ttsVoiceSelect">Voz:</label>
                    <select id="ttsVoiceSelect" disabled><option value="">A carregar vozes...</option></select>
                </div>
                <div class="accessibility-controls mt-1">
                    <label for="ttsRateRange">Velocidade: <span id="ttsRateValue">1</span></label>
                    <input type="range" id="ttsRateRange" min="0.5" max="2" step="0.1" value="1">
                </div>
                <div class="accessibility-controls mt-1">
                    <label for="ttsPitchRange">Tom: <span id="ttsPitchValue">1</span></label>
                    <input type="range" id="ttsPitchRange" min="0" max="2" step="0.1" value="1">
                </div>
            </div>
        </div>
    </div>


    <script>
        // Assegurar que o objeto jsPDF está disponível globalmente se usar a versão UMD
        const { jsPDF } = window.jspdf;

        // --- Gemini API Integration ---
        const generateUserStoriesBtn = document.getElementById('generateUserStoriesBtn');
        const featureDescriptionTextarea = document.getElementById('featureDescription');
        const userStoriesLoadingDiv = document.getElementById('userStoriesLoading');
        const geminiModal = document.getElementById('geminiModal');
        const geminiModalTitle = document.getElementById('geminiModalTitle');
        const geminiModalBody = document.getElementById('geminiModalBody');
        const geminiModalCloseBtn = document.getElementById('geminiModalCloseBtn');

        function showGeminiModal(title, htmlContent) {
            if (geminiModalTitle) geminiModalTitle.textContent = title;
            if (geminiModalBody) geminiModalBody.innerHTML = htmlContent;
            if (geminiModal) geminiModal.classList.add('active');
        }
        function hideGeminiModal() {
            if (geminiModal) geminiModal.classList.remove('active');
        }
        if (geminiModalCloseBtn) geminiModalCloseBtn.addEventListener('click', hideGeminiModal);
        if (geminiModal) geminiModal.addEventListener('click', function(event) {
            if (event.target === geminiModal) hideGeminiModal();
        });

        if (generateUserStoriesBtn) {
            generateUserStoriesBtn.addEventListener('click', async () => {
                const description = featureDescriptionTextarea.value.trim();
                if (!description) {
                    showGeminiModal("Erro de Validação", "<p>Por favor, descreva uma funcionalidade para gerar as user stories.</p>");
                    return;
                }
                userStoriesLoadingDiv.classList.remove('hidden');
                generateUserStoriesBtn.disabled = true;
                const prompt = `Com base na seguinte descrição de funcionalidade, gera 3 exemplos de user stories CURTAS e CONCISAS no formato "Como um [tipo de utilizador], eu quero [objetivo] para que [razão/benefício]". Não adiciones introduções ou conclusões, apenas as user stories. Descrição da funcionalidade: "${description}"`;
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`Erro da API: ${response.status} ${response.statusText}. Detalhes: ${errorData?.error?.message || 'Sem detalhes adicionais.'}`);
                    }
                    const result = await response.json();
                    if (result.candidates && result.candidates[0]?.content?.parts?.[0]) {
                        const text = result.candidates[0].content.parts[0].text;
                        const formattedText = text.split('\n').map(line => line.trim()).filter(line => line.length > 0).map(line => `<p class="mb-2 p-2 bg-violet-100 rounded">${line}</p>`).join('');
                        showGeminiModal("✨ Exemplos de User Stories Geradas", `<div class="text-sm">${formattedText || '<p>Não foi possível gerar as user stories.</p>'}</div>`);
                    } else {
                        showGeminiModal("Erro", "<p>Não foi possível extrair as user stories da resposta da API.</p>");
                    }
                } catch (error) {
                    showGeminiModal("Erro na API", `<p>Ocorreu um erro: ${error.message}</p>`);
                } finally {
                    userStoriesLoadingDiv.classList.add('hidden');
                    generateUserStoriesBtn.disabled = false;
                }
            });
        }

        // --- Share Page Functionality ---
        const sharePageBtn = document.getElementById('sharePageBtn');
        const shareModal = document.getElementById('shareModal');
        const shareModalCloseBtn = document.getElementById('shareModalCloseBtn');
        const pageLinkInput = document.getElementById('pageLinkInput');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const qrcodeCanvas = document.getElementById('qrcodeCanvas');
        const copyFeedback = document.getElementById('copyFeedback');
        let qrCodeInstance = null; 

        function showShareModal() {
            if (shareModal && pageLinkInput && qrcodeCanvas) {
                const pageUrl = window.location.href;
                pageLinkInput.value = pageUrl;
                qrcodeCanvas.innerHTML = '';
                if (typeof QRCode !== 'undefined') { 
                     qrCodeInstance = new QRCode(qrcodeCanvas, {
                        text: pageUrl, width: 180, height: 180,
                        colorDark : "#000000", colorLight : "#ffffff",
                        correctLevel : QRCode.CorrectLevel.H
                    });
                } else {
                    qrcodeCanvas.innerHTML = '<p class="text-xs text-red-500">Erro ao carregar biblioteca QRCode.</p>';
                }
                shareModal.classList.add('active');
            }
        }
        function hideShareModal() {
            if (shareModal) {
                shareModal.classList.remove('active');
                if (copyFeedback) copyFeedback.textContent = ''; 
            }
        }
        if (sharePageBtn) sharePageBtn.addEventListener('click', showShareModal);
        if (shareModalCloseBtn) shareModalCloseBtn.addEventListener('click', hideShareModal);
        if (shareModal) shareModal.addEventListener('click', (event) => {
            if (event.target === shareModal) hideShareModal();
        });
        if (copyLinkBtn && pageLinkInput) {
            copyLinkBtn.addEventListener('click', () => {
                pageLinkInput.select();
                pageLinkInput.setSelectionRange(0, 99999); 
                try {
                    document.execCommand('copy');
                    if(copyFeedback) {
                        copyFeedback.textContent = 'Link copiado!';
                        copyFeedback.classList.remove('text-red-500');
                        copyFeedback.classList.add('text-green-600');
                    }
                    setTimeout(() => { if(copyFeedback) copyFeedback.textContent = ''; }, 2000);
                } catch (err) {
                    if(copyFeedback) {
                        copyFeedback.textContent = 'Erro ao copiar.';
                        copyFeedback.classList.remove('text-green-600');
                        copyFeedback.classList.add('text-red-500');
                    }
                }
            });
        }

        // --- PDF Export Functionality ---
        const exportPdfBtn = document.getElementById('exportPdfBtn');
        const pdfExportFeedbackEl = document.getElementById('pdfExportFeedback');

        function showPdfFeedback(message, isError = false) {
            if (pdfExportFeedbackEl) {
                pdfExportFeedbackEl.textContent = message;
                pdfExportFeedbackEl.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 px-5 py-2.5 rounded-lg shadow-lg text-white text-sm'; 
                if (isError) {
                    pdfExportFeedbackEl.classList.add('bg-red-500');
                } else {
                    pdfExportFeedbackEl.classList.add('bg-green-500');
                }
                pdfExportFeedbackEl.style.display = 'block';
                setTimeout(() => {
                    pdfExportFeedbackEl.style.display = 'none';
                }, 3000);
            }
        }

        if (exportPdfBtn) {
            exportPdfBtn.addEventListener('click', async () => {
                const originalContentElement = document.getElementById('content-container'); 
                if (!originalContentElement) {
                    showPdfFeedback("Elemento de conteúdo principal não encontrado.", true);
                    return;
                }
                showPdfFeedback("A preparar PDF, por favor aguarde...");
                exportPdfBtn.disabled = true;

                const clonedContent = originalContentElement.cloneNode(true);
                clonedContent.style.position = 'absolute';
                clonedContent.style.left = '-9999px'; 
                clonedContent.style.width = originalContentElement.offsetWidth + 'px'; 
                clonedContent.style.backgroundColor = 'white';
                clonedContent.style.padding = '20px'; 
                clonedContent.style.color = '#1f2937'; 
                
                clonedContent.querySelectorAll('p, h1, h2, h3, h4, h5, h6, li, strong, span, div:not([class*="bg-"])')
                    .forEach(el => el.style.color = '#1f2937');


                document.body.appendChild(clonedContent);
                try {
                    const canvas = await html2canvas(clonedContent, { 
                        scale: 2, useCORS: true, logging: false, backgroundColor: null,
                        width: clonedContent.scrollWidth, height: clonedContent.scrollHeight,
                        windowWidth: clonedContent.scrollWidth, windowHeight: clonedContent.scrollHeight
                    });
                    document.body.removeChild(clonedContent); 
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
                    const imgProps = pdf.getImageProperties(imgData);
                    const pdfPageWidth = pdf.internal.pageSize.getWidth();
                    const pdfPageHeight = pdf.internal.pageSize.getHeight();
                    const margin = 10; 
                    const usablePdfWidth = pdfPageWidth - (2 * margin);
                    const usablePdfHeight = pdfPageHeight - (2 * margin);
                    const imgRenderHeight = (imgProps.height * usablePdfWidth) / imgProps.width;
                    let heightLeft = imgRenderHeight;
                    let currentYPosition = margin; 
                    pdf.addImage(imgData, 'PNG', margin, currentYPosition, usablePdfWidth, imgRenderHeight);
                    heightLeft -= usablePdfHeight;
                    while (heightLeft > 0) {
                        currentYPosition -= usablePdfHeight; 
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', margin, currentYPosition, usablePdfWidth, imgRenderHeight);
                        heightLeft -= usablePdfHeight;
                    }
                    pdf.save('scrum_conteudo.pdf');
                    showPdfFeedback("PDF gerado com sucesso!");
                } catch (error) {
                    console.error("Erro ao gerar PDF:", error);
                    showPdfFeedback("Erro ao gerar PDF. Verifique a consola.", true);
                    if (document.body.contains(clonedContent)) {
                        document.body.removeChild(clonedContent);
                    }
                } finally {
                    exportPdfBtn.disabled = false;
                }
            });
        }

        // --- Accessibility Features ---
        const accessibilityBtn = document.getElementById('accessibilityBtn');
        const accessibilityPanel = document.getElementById('accessibilityPanel');
        const mainContentContainer = document.getElementById('content-container'); 

        const increaseFontBtn = document.getElementById('increaseFontBtn');
        const decreaseFontBtn = document.getElementById('decreaseFontBtn');
        const resetFontBtn = document.getElementById('resetFontBtn');
        
        const defaultContrastBtn = document.getElementById('defaultContrastBtn');
        const bwContrastBtn = document.getElementById('bwContrastBtn');
        const ybContrastBtn = document.getElementById('ybContrastBtn');

        const playTTSBtn = document.getElementById('playTTSBtn');
        const pauseTTSBtn = document.getElementById('pauseTTSBtn');
        const stopTTSBtn = document.getElementById('stopTTSBtn');
        const ttsVoiceSelect = document.getElementById('ttsVoiceSelect');
        const ttsRateRange = document.getElementById('ttsRateRange');
        const ttsRateValue = document.getElementById('ttsRateValue');
        const ttsPitchRange = document.getElementById('ttsPitchRange');
        const ttsPitchValue = document.getElementById('ttsPitchValue');


        let currentFontSizeMultiplier = 1; 
        const FONT_SIZE_STEP_ACC = 0.1; 
        const MIN_FONT_MULTIPLIER_ACC = 0.7;
        const MAX_FONT_MULTIPLIER_ACC = 1.8;
        let originalFontSizesMap = new Map(); 

        if (accessibilityBtn && accessibilityPanel) {
            accessibilityBtn.addEventListener('click', () => {
                accessibilityPanel.classList.toggle('active');
                accessibilityPanel.classList.toggle('hidden');
            });
        }
        
        function storeOriginalFontSizesAcc() {
            if (originalFontSizesMap.size === 0 && mainContentContainer) {
                 mainContentContainer.querySelectorAll('p, h1, h2, h3, h4, h5, h6, li, a, span:not([class*="icon"])').forEach((el, index) => {
                    const computedStyle = window.getComputedStyle(el);
                    const elId = el.dataset.accId || `acc-el-${index}`;
                    el.dataset.accId = elId;
                    originalFontSizesMap.set(elId, parseFloat(computedStyle.fontSize));
                });
            }
        }
        
        function updateFontSizesAcc(multiplier) {
            if (!mainContentContainer) return;
            storeOriginalFontSizesAcc(); 

            currentFontSizeMultiplier = Math.max(MIN_FONT_MULTIPLIER_ACC, Math.min(multiplier, MAX_FONT_MULTIPLIER_ACC));

            mainContentContainer.querySelectorAll('[data-acc-id]').forEach(el => {
                const originalSize = originalFontSizesMap.get(el.dataset.accId);
                if (originalSize) {
                    el.style.fontSize = (originalSize * currentFontSizeMultiplier) + 'px';
                }
            });
            
            mainContentContainer.querySelectorAll('p, li').forEach(el => {
                 const currentElementFontSize = parseFloat(el.style.fontSize || window.getComputedStyle(el).fontSize);
                 let newLineHeight = originalFontSizesMap.get(el.dataset.accId) * 1.7; 
                 if (currentFontSizeMultiplier !== 1) { 
                    newLineHeight = (originalFontSizesMap.get(el.dataset.accId) * 1.7 * currentFontSizeMultiplier * 0.9); 
                 }
                 el.style.lineHeight = Math.max(originalFontSizesMap.get(el.dataset.accId) * 1.5, newLineHeight) + 'px';
            });
        }


        if (increaseFontBtn) {
            increaseFontBtn.addEventListener('click', () => {
                updateFontSizesAcc(currentFontSizeMultiplier + FONT_SIZE_STEP_ACC);
            });
        }
        if (decreaseFontBtn) {
            decreaseFontBtn.addEventListener('click', () => {
                updateFontSizesAcc(currentFontSizeMultiplier - FONT_SIZE_STEP_ACC);
            });
        }
        if (resetFontBtn) {
            resetFontBtn.addEventListener('click', () => {
                currentFontSizeMultiplier = 1; 
                mainContentContainer.querySelectorAll('[data-acc-id]').forEach(el => {
                    const originalSize = originalFontSizesMap.get(el.dataset.accId);
                    if (originalSize) {
                        el.style.fontSize = originalSize + 'px';
                        if (el.tagName === 'P' || el.tagName === 'LI') {
                           el.style.lineHeight = (originalSize * 1.7) + 'px'; 
                        }
                    } else {
                         el.style.fontSize = ''; 
                         if (el.tagName === 'P' || el.tagName === 'LI') {
                            el.style.lineHeight = '';
                         }
                    }
                });
            });
        }

        function applyContrast(themeClass) {
            document.body.classList.remove('contrast-default', 'contrast-bw', 'contrast-yb');
            if (themeClass !== 'contrast-default') {
                document.body.classList.add(themeClass);
            }
        }
        if (defaultContrastBtn) defaultContrastBtn.addEventListener('click', () => applyContrast('contrast-default'));
        if (bwContrastBtn) bwContrastBtn.addEventListener('click', () => applyContrast('contrast-bw'));
        if (ybContrastBtn) ybContrastBtn.addEventListener('click', () => applyContrast('contrast-yb'));

        let speechSynth = window.speechSynthesis;
        let currentUtterance = null;
        let elementsToRead = [];
        let currentElementIndex = 0;
        let isReadingPaused = false; 
        let availableVoices = [];

        function populateVoiceList() {
            if(typeof speechSynthesis === 'undefined' || !ttsVoiceSelect) {
                return;
            }
            availableVoices = speechSynth.getVoices();
            ttsVoiceSelect.innerHTML = ''; 

            if (availableVoices.length === 0) {
                 ttsVoiceSelect.innerHTML = '<option value="">Nenhuma voz disponível</option>';
                 ttsVoiceSelect.disabled = true;
                 return;
            }
            
            let hasPortugueseVoice = false;
            availableVoices.forEach(voice => {
                if (voice.lang.startsWith('pt')) { 
                    const option = document.createElement('option');
                    option.textContent = `${voice.name} (${voice.lang})`;
                    option.setAttribute('data-lang', voice.lang);
                    option.setAttribute('data-name', voice.name);
                    ttsVoiceSelect.appendChild(option);
                    hasPortugueseVoice = true;
                }
            });

            if (!hasPortugueseVoice) {
                 availableVoices.forEach(voice => {
                    const option = document.createElement('option');
                    option.textContent = `${voice.name} (${voice.lang})`;
                    option.setAttribute('data-lang', voice.lang);
                    option.setAttribute('data-name', voice.name);
                    ttsVoiceSelect.appendChild(option);
                });
            }
            ttsVoiceSelect.disabled = false;
        }

        populateVoiceList();
        if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }


        function prepareTextToRead() {
            if (!mainContentContainer) return '';
            let textSegments = [];
            mainContentContainer.querySelectorAll('section.mb-10, section.p-6.bg-white').forEach(section => {
                const titleElement = section.querySelector('h1, h2');
                if (titleElement && titleElement.textContent.trim().length > 0) {
                    textSegments.push(titleElement.textContent.trim() + ".");
                }
                section.querySelectorAll('p, h3, h4, li').forEach(el => {
                    if (el.closest('.mt-8.p-6.border.border-violet-300') || el.closest('ul.list-disc')) {
                        if (el.tagName.toLowerCase() === 'li' && el.closest('ul.list-disc')) { 
                             const link = el.querySelector('a');
                             if (link && link.textContent.trim().length > 0) {
                                textSegments.push(link.textContent.trim() + ", link.");
                             } else if (el.textContent.trim().length > 0) {
                                textSegments.push(el.textContent.trim() + ".");
                             }
                        }
                        return; 
                    }
                    if (el.textContent.trim().length > 0) {
                        textSegments.push(el.textContent.trim().replace(/\s+/g, ' ') + ".");
                    }
                });
            });
            return textSegments.join(' \n ');
        }
        
        function speakNextSegment() {
            if (currentElementIndex >= elementsToRead.length || !speechSynth) {
                playTTSBtn.disabled = false;
                pauseTTSBtn.disabled = true;
                stopTTSBtn.disabled = true;
                currentElementIndex = 0;
                currentUtterance = null;
                elementsToRead = []; 
                return;
            }
            if (speechSynth.paused && isReadingPaused) { return; }
            if (speechSynth.speaking && !isReadingPaused) { return; }

            currentUtterance = new SpeechSynthesisUtterance(elementsToRead[currentElementIndex]);
            currentUtterance.lang = 'pt-BR'; 
            currentUtterance.rate = parseFloat(ttsRateRange.value) || 1;
            currentUtterance.pitch = parseFloat(ttsPitchRange.value) || 1;

            const selectedVoiceName = ttsVoiceSelect.selectedOptions[0]?.getAttribute('data-name');
            if (selectedVoiceName) {
                const voice = availableVoices.find(v => v.name === selectedVoiceName);
                if (voice) currentUtterance.voice = voice;
            } else { 
                 const portugueseVoice = availableVoices.find(v => v.lang.startsWith('pt-BR') || v.lang.startsWith('pt-PT'));
                 if(portugueseVoice) currentUtterance.voice = portugueseVoice;
            }


            currentUtterance.onend = () => {
                if (elementsToRead.length === 0) return; 

                if (currentElementIndex < elementsToRead.length - 1) {
                    currentElementIndex++;
                    speakNextSegment(); 
                } else {
                    playTTSBtn.disabled = false;
                    pauseTTSBtn.disabled = true;
                    stopTTSBtn.disabled = true;
                    currentElementIndex = 0; 
                    currentUtterance = null;
                    elementsToRead = []; 
                }
            };
            currentUtterance.onerror = (event) => {
                console.error('Erro na síntese de voz:', event.error);
                isReadingPaused = false;
                currentElementIndex = 0;
                elementsToRead = []; 
                currentUtterance = null;
                if (speechSynth) { speechSynth.cancel(); }
                playTTSBtn.disabled = false;
                pauseTTSBtn.disabled = true;
                stopTTSBtn.disabled = true;
            };
            speechSynth.speak(currentUtterance);
            playTTSBtn.disabled = true;
            pauseTTSBtn.disabled = false;
            stopTTSBtn.disabled = false;
            isReadingPaused = false; 
        }

        if (playTTSBtn) {
            playTTSBtn.addEventListener('click', () => {
                if (!speechSynth) {
                    alert('A síntese de voz não é suportada neste navegador.');
                    return;
                }
                if (speechSynth.paused && currentUtterance && isReadingPaused) {
                    speechSynth.resume();
                    isReadingPaused = false;
                    playTTSBtn.disabled = true;
                    pauseTTSBtn.disabled = false;
                    stopTTSBtn.disabled = false; 
                } else {
                    speechSynth.cancel(); 
                    currentUtterance = null; 
                    isReadingPaused = false; 
                    elementsToRead = []; 
                    currentElementIndex = 0; 

                    const fullText = prepareTextToRead();
                    elementsToRead = fullText.split('. ') 
                                         .map(s => s.trim())
                                         .filter(segment => segment.length > 0)
                                         .map(s => s.endsWith('.') ? s : s + '.');

                    if (elementsToRead.length > 0) {
                        speakNextSegment(); 
                    } else {
                        alert("Não há conteúdo textual para ler na página.");
                        playTTSBtn.disabled = false; 
                        pauseTTSBtn.disabled = true;
                        stopTTSBtn.disabled = true;
                    }
                }
            });
        }

        if (pauseTTSBtn) {
            pauseTTSBtn.addEventListener('click', () => {
                if (speechSynth && speechSynth.speaking && !speechSynth.paused) {
                    speechSynth.pause();
                    isReadingPaused = true;
                    playTTSBtn.disabled = false; 
                    pauseTTSBtn.disabled = true; 
                }
            });
            pauseTTSBtn.disabled = true;
        }

        if (stopTTSBtn) {
            stopTTSBtn.addEventListener('click', () => {
                isReadingPaused = false;
                currentElementIndex = 0; 
                elementsToRead = [];    
                currentUtterance = null; 
                if (speechSynth) { speechSynth.cancel(); }
                playTTSBtn.disabled = false;
                pauseTTSBtn.disabled = true;
                stopTTSBtn.disabled = true;
            });
            stopTTSBtn.disabled = true; 
        }

        if (ttsRateRange && ttsRateValue) {
            ttsRateRange.addEventListener('input', () => {
                ttsRateValue.textContent = ttsRateRange.value;
                if (currentUtterance && speechSynth.speaking && !speechSynth.paused) { 
                    speechSynth.cancel(); 
                    currentUtterance.rate = parseFloat(ttsRateRange.value);
                    speechSynth.speak(currentUtterance); 
                } else if (currentUtterance && speechSynth.paused && isReadingPaused) { 
                     currentUtterance.rate = parseFloat(ttsRateRange.value);
                }
            });
        }
        if (ttsPitchRange && ttsPitchValue) {
            ttsPitchRange.addEventListener('input', () => {
                ttsPitchValue.textContent = ttsPitchRange.value;
                 if (currentUtterance && speechSynth.speaking && !speechSynth.paused) {
                    speechSynth.cancel();
                    currentUtterance.pitch = parseFloat(ttsPitchRange.value);
                    speechSynth.speak(currentUtterance);
                } else if (currentUtterance && speechSynth.paused && isReadingPaused) {
                     currentUtterance.pitch = parseFloat(ttsPitchRange.value);
                }
            });
        }


        window.addEventListener('load', storeOriginalFontSizesAcc);

    </script>

</body>
</html>
